<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee | Edit</title>
    <link rel="stylesheet" href="../Css/RegistrationFormStyles.css">
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    
</head>
<body>
    <header class="Header">
        <div class="InsideHeader">
            <img src="../assets/logo.png" alt="Logo">
            <div>
                <span class="LogoText TextEmployee">EMPLOYEE</span><br>
                <span class="LogoText">PAYROLL</span>
            </div>
        </div>
    </header>
    
    <div class="FormBodyParent">
        <div class="FormBody">
            <form>

                <div class="FormTitle">
                    <p>Employee Details Edit</p>
                </div>

                <div class="Content">
                    <label class="LabelText" for="NameText">Name</label>
                    <input class="InputStyle" id="NameText" type="text" name="name">
                </div>

                <div class="Content">
                    <label class="LabelText">Profile Image</label>
                    <div class="RadioProfilepic">
                        <input class="radioInput" type="radio" name="ProfilePic" id="ProfilePic1" value="../assets/Ellipse -1.png">
                        <img class="image" src="../assets/Ellipse -1.png" alt="Pic1">
                        <input class="radioInput" type="radio" name="ProfilePic" id="ProfilePic2" value="../assets/Ellipse -2.png">
                        <img class="image" src="../assets/Ellipse -2.png" alt="Pic2">
                        <input class="radioInput" type="radio" name="ProfilePic" id="ProfilePic3" value="../assets/Ellipse -4.png">
                        <img class="image" src="../assets/Ellipse -4.png" alt="Pic3">
                        <input class="radioInput" type="radio" name="ProfilePic" id="ProfilePic4" value="../assets/Ellipse -3.png">
                        <img class="image" src="../assets/Ellipse -3.png" alt="Pic4">
                    </div>
                </div>

                <div class="Content">
                    <label class="LabelText">Gender</label>
                    <div class="RadioProfilepic">
                        <input class="radioInput genderRadioButtons" type="radio" name="Gender" id="male" value="Male">
                        <span class="genderChoice">Male</span>
                        <input class="radioInput genderRadioButtons" type="radio" name="Gender" id="female" value="Female">
                        <span class="genderChoice">Female</span>
                    </div>
                </div>

                <div class="Content">
                    <label class="LabelText">Department</label>
                    <div class="departmentCheckbox">
                        <input class="Checkboxes" type="checkbox" name="Department" id="hr" value="HR">
                        <span class="departmentText">HR</span>
                        <input class="Checkboxes" type="checkbox" name="Department" id="sales" value="Sales">
                        <span class="departmentText">Sales</span>
                        <input class="Checkboxes" type="checkbox" name="Department" id="finance" value="Finance">
                        <span class="departmentText">Finance</span>
                        <input class="Checkboxes" type="checkbox" name="Department" id="engineer" value="Engineer">
                        <span class="departmentText">Engineer</span>
                        <input class="Checkboxes" type="checkbox" name="Department" id="others" value="Other">
                        <span class="departmentText">Others</span>
                    </div>
                </div>

                <div class="Content">
                    <label class="LabelText" for="salary">Salary</label>
                    <select class="salarySelector" name="Salary" id="salary" required>
                        <option value="Choose Salary">Choose Salary</option>
                        <option value="10000">10000</option>
                        <option value="20000">20000</option>
                        <option value="30000">30000</option>
                        <option value="40000">40000</option>
                        <option value="50000">50000</option>
                    </select>
                </div>

                <div class="Content">
                    <label class="LabelText">Start Date</label>
                    <div class="DateSelector">
                        <select class="calanderSelector" name="Day" id="day" required>
                            <option value="Day">Day</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                            <option value="31">31</option>
                        </select>
    
                        <select class="calanderSelector" name="Month" id="month" required>
                            <option value="Jan">January</option>
                            <option value="Feb">Febuary</option>
                            <option value="Mar">March</option>
                            <option value="Apr">April</option>
                            <option value="May">May</option>
                            <option value="Jun">June</option>
                            <option value="Jul">July</option>
                            <option value="Aug">August</option>
                            <option value="Sep">September</option>
                            <option value="Oct">October</option>
                            <option value="Nov">November</option>
                            <option value="Dec">December</option>
                        </select>
    
                        <select class="calanderSelector" name="Year" id="year" required>
                            <option value="2010">2010</option>
                            <option value="2011">2011</option>
                            <option value="2012">2012</option>
                            <option value="2013">2013</option>
                            <option value="2014">2014</option>
                            <option value="2015">2015</option>
                            <option value="2016">2016</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                            <option value="2023">2023</option>
                        </select>
                    </div>
                </div>

                <div class="NotesContent">
                    <label class="LabelText" for="notes">Notes</label>
                    <textarea class="NotesInputStyle" name="Notes" id="notes" required></textarea>
                </div>

                <div class="EndButtons">
                    <!-- <button class="Grey button" onclick="EditCancel()">Cancel</button> -->
                    <div>
                        <button type="submit" class="submitbutton button" id="SubmitButton">Submit</button>
                        <!-- <button type="reset" class="Grey button">Reset</button> -->
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script src="../Js/DataRetriever.js"></script>

    <script>

        $(document).ready(function() {

            let empId = localStorage.getItem('employeeData');
            console.log(empId);
            $.ajax({
            url: "http://localhost:3000/EmployeeData/"+empId,
            type: "GET",
            dataType: "json",
            success: function (retrievedData) {

                    $('#NameText').val(retrievedData.Name);

                    // selecting Profile Pic radio button based on value
                    let profilePicRadioButton = document.getElementsByName('ProfilePic');
                    for(let i = 0; i < profilePicRadioButton.length; i++)
                    {
                        if(profilePicRadioButton[i].value == retrievedData.ProfilePic)
                        {
                            profilePicRadioButton[i].checked = true;
                            break;
                        }
                    }

                    // selecting gender radio button 
                    let genderRadioButton = document.getElementsByName('Gender');
                    for(let i = 0; i < genderRadioButton.length; i++)
                    {
                        if(genderRadioButton[i].value == retrievedData.Gender)
                        {
                            genderRadioButton[i].checked = true;
                            break;
                        }
                    }

                    // splitting Department string into array 
                    let departments = retrievedData.Department.split(" ");
                    $.each(departments, function(index, value) {

                        $('input[name=Department][value="'+value+'"]').prop('checked', true);

                    });

                    $('select[name=Salary]').val(retrievedData.Salary);

                    var startDate = retrievedData.StartDate.split(" ");
                    $('select[name=Day]').val(startDate[0]);
                    $('select[name=Month]').val(startDate[1]);
                    $('select[name=Year]').val(startDate[2]);

                    $('#notes').val(retrievedData.Notes);
                }

            });
  
        });

    </script>
</body>
</html>